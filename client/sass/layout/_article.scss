$collectionOpenTransitionDuration: 1s;

.slidingContainer {
    position: absolute;
}

.sliding {
    position: absolute;
    transform-origin: center center;
    -webkit-transform-origin: center center;
}

section.container section.space section.content{
    
    .collection.closed {
        
        article {
            font-weight: $fontWeightMedium;
            font-size: $typeHeaderSize;
            line-height: 1.25em;
            letter-spacing: .015125em;

            .card {
                border-width: $cardBorderWidth * $scaleMultiple;
                
                &.text {
                    font-weight: $fontWeightMedium;
                }
                &.website {
                    header {

                        h1 {
                            -webkit-line-clamp: 6;
                            max-height: $typeHeaderLeading * 6;
                        }
                        
                        .url {
                            opacity: 0;
                        }
                    }
                    .description {
                        opacity: 0;
                    }
                    
                    img {
                        margin-top: -$broadMargin/2;
                    }
                }
            }
        }
    }
    
/*
    article, h1, .card {
        @include transition($collectionOpenTransitionDuration $defaultCurve);
        @include transition-property(font-weight);
    }
*/
    
    article {
        color: $colorType;
        position: absolute;
        backface-visibility: hidden;
        margin-right: -2pt;
        line-height: 1.5em;
        transform-origin:           bottom right;
        -webkit-transform-origin:   bottom right;
        @include typeHeader;
        
        // EVENTS
        
        &:hover, &.hover {
            cursor: move;
            cursor: -webkit-grab;
            cursor: -moz-grab;;
            cursor: grab;
            
            .elementControls {
                opacity: 1;
            }

            > .content {
                @include cardHover;
            }
        }

        &.dragging, &.ui-draggable-dragging, &.active, &:active {
            cursor: -webkit-grabbing;
            cursor: -moz-grabbing;
            cursor: grabbing;

            > .content {
                @include cardDrag;
            }
        }
        
        &.locked {
            opacity: .25;
            -webkit-filter: grayscale(1);
        }

        &.resizing {
            .card .ui-resizable-handle {
                opacity: .5;
            }
        }
                
        // CONTENTS
        
        .elementControls {
            @include transition(.25s $defaultCurve);
            @include transition-property(opacity);
            opacity: 0; 
            position: relative;
            font-style: normal;
            color: $colorType;
            
            .elementDeleteButton, author {
                @include typeSmall;
                @include linkReset;
                position: absolute;
                display: block;
                bottom: 0;
            }
            
            .elementDeleteButton {
                left: 0;
            }
            
            author {
                right:  0;
                white-space: nowrap;
            }
        }
        
        // CONTENT
        
        > .content {
            position: relative;
                    transform-origin: bottom right;
            -webkit-transform-origin: bottom right;
            @include transition(.125s $defaultCurve);
            @include transition-property(transform,
                                 -webkit-transform,
                                    -moz-transform,
                                         box-shadow,
                                 -webkit-box-shadow,
                                    -moz-box-shadow,
                                         background-color,
                                         border-color,
                                         color);
        }
        
        &.text {
            font-style: normal;
            
            * {
                outline: none;
            }
            
            em {
                font-style: italic;
            }
            
            strong {
                font-weight: $fontWeightBold;
            }
            
            &.short {
                @include typeHeader;
            }
            
            &.long {
                @include typeBody;
            }
        }
        
        &.soundcloud .card {
            width: $articleWidth;
            padding: 0;
            
            header {
                border-top: 0;
                padding: $cardPadding;
                
                h1 {
                }
                
                .artist {
                    @include typeSmall;
                    margin-top: $cell/2;
                }
                
                .detail {
                    margin-top: $midMargin; 
                    @include typeSmall;
                }
            }
        }

        
        .card {
            position: relative;
            max-width: $articleWidth;
            overflow: hidden;
//             @include transition($collectionOpenTransitionDuration linear);
//             @include transition-property(border-width);

            &.text {
                @include cardStyle;
                background: -webkit-linear-gradient(#ffffaa 0%, #ffffff 100%);
//                 font-family: "Comic Sans MS";
                border: $cardBorder;
                width: $articleWidth;
                min-height: $articleMinHeight;
            }

            &.image {
                width: $articleWidth;
                margin-left: $cardBorderWidth;
//                 border-left: $cardBorder;
            }
            
            &.website {
                @include cardStyle;
                width: $articleWidthNarrow;
                padding-top: $cell * 2;
                
                &:hover {
                    @include hoverLinkAnimation;
                }
                
                a {
                    border: 0;
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                }
                               
                .text {

                    
                    header {
                        position: absolute;
                        top: $cell/2;
                        @include transition($collectionOpenTransitionDuration $defaultCurve);
                        @include transition-property(top);

                        h1 {
                            display: -webkit-box;
                            -webkit-line-clamp: 4;
                            -webkit-box-orient: vertical; 
//                             max-height: $typeHeaderLeading * 3; 
//                             text-overflow: ellipsis;
                            max-height: $typeHeaderLeading * 4;
                            overflow: hidden;
                            margin-left: $headerLeftMarginOffset;
                            padding-bottom: .125em;
                            margin-bottom: -.125em;
//                             @include multiline-ellipsis($typeHeaderLeading * 3, $typeHeaderLeading, 1em);
                        }
    
                        .url {
                            margin-top: $cell/2;
                            @include typeSmall;
                            @include transition($collectionOpenTransitionDuration $defaultCurve);
                            @include transition-property(opacity);
                        }
                    }

                    .description {
                        margin-top: ($broadMargin * 3);
                        margin-bottom: $cell/2;
                        opacity: 1;
                        @include typeSmall;
                        @include transition($collectionOpenTransitionDuration $defaultCurve);
                        @include transition-property(opacity, margin-top);
                    }
                    
                    img {
                        margin-top: 0;
                        @include transition($collectionOpenTransitionDuration $defaultCurve);
                        @include transition-property(margin-top);
                    }
                }

                &.image {
                    max-height: $baseline * 24;
                }
            }

            
            &.caption, &.comment {                       
                // background-color: $colorCardBackgroundLight;
            }

            img {
                width: 100%;
                margin-bottom: -$cell/3;
                background-color: $colorCardBackground;
            }
        }
        
        &.addElementForm {
//             position: absolute;
//             top: 0;
//             left: 0;
//             height: $col/2;
//             width: $col/2;
//             border-radius: $col/2;
//             width: $articleWidth;
            height: $articleWidthWide;
            border: $cardBorder;
            border-style: dashed;
            z-index: 999999999999;
            padding: $cardPadding;
            cursor: pointer;
            @include transform(translate3d($cell*2, $cell*2, 0));
            @include transition(.25s $defaultCurve);
            @include transition-property(border-radius, background-image, height, width, transform, -webkit-transform, -moz-transform);
            
            overflow: hidden;
                        
                
            ul {
                opacity: 1;
                transform-origin: top left;
                -webkit-transform-origin: top left;
                
                li {
                    vertical-align: top;
                    
                    &.text {
                        width: $articleWidth;
                        height: $articleWidthWide - $cell * 2;
                        position: relative;
                        
                        span.label {
                            display: none;
                        }
                        
                        textarea {
                            @include typeHeader;
                            height: 100%;
                        }
                    }
                    
                    &.upload {
                        @include typeBody;
                        position: relative;
                        display: inline-block;
                        height: $leading;
                        width: intrinsic;
                        
                        form {
                            height: 100%;
                            width: 100%;
                            top: 0;
                            left: 0;
                            position: absolute;
                            
                            input {
                                height: 100%;
                                width: 100%;
                                position: absolute;
                                top: 0;
                                left: 0;
                                opacity: 0;
                                cursor: pointer;
                            }
                        }
                    }
                    
                    &.done {
                        position: relative;
                        display: inline-block;
                        height: $leading;
                        float: right;
                        width: intrinsic;

                        a {
                            @include typeBody;
                            position: relative;
                            top: -$cell;
                            border: 0;
                            padding: 0;
                            margin-left: $cell;
                        }
                    }
                }
            }
        }
    }
}