$collectionOpenTransitionDuration: 1s;

section.container section.space section.content{
    
    .collection.closed {
        
        article {
            font-weight: $fontWeightMedium;
            font-size: $typeHeaderSize;
            line-height: 1.25em;
            letter-spacing: .015125em;
//             @include typeBody;

            .card {
                &.text {
                    font-weight: $fontWeightMedium;
                }
                &.website {
                    header {
//                         position: relative;
//                         top: 0;

                        h1 {
                            -webkit-line-clamp: 6;
                            max-height: $typeHeaderLeading * 6;
                        }
                        
                        .url {
//                             display: none;
                            opacity: 0;
                        }
                    }
                    .description {
//                         display: none;
                        opacity: 0;
//                         margin-top: -$broadMargin + $cell * 8;
                    }
                    
                    img {
                        margin-top: -$broadMargin/2;
                    }
                }
            }
        }
    }
    
    article, h1, .card {
        @include transition($collectionOpenTransitionDuration $defaultCurve);
        @include transition-property(font-weight);
    }
    
    article {
        color: $colorType;
        position: absolute;
        backface-visibility: hidden;
        margin-right: -2pt;
        line-height: 1.5em;
        transform-origin:           bottom right;
        -webkit-transform-origin:   bottom right;
        @include typeHeader;
        
        // EVENTS
        
        &:hover, &.hover, &.dragging, &.ui-draggable-dragging/* , &.add-element, &.editing  */{
            z-index: 9999999;

            author {
                opacity: 1;
                @include transform(translate3d(0, $leading *1.125, 0));
                background-color: $colorAccent;
            }
        }
        
        &:hover, &.hover {
            cursor: move;
            cursor: -webkit-grab;
            cursor: -moz-grab;;
            cursor: grab;
            
            > .card {
                @include cardHover;
                
//                 &.text {
//                     background-color: $colorAccent;
//                 }
            }
        }

        &.locked {
            opacity: .25;
            -webkit-filter: grayscale(1);
        }

        &.resizing {
            .card .ui-resizable-handle {
                opacity: .5;
            }
        }

        &.dragging, &.ui-draggable-dragging, &.active, &:active {
            cursor: -webkit-grabbing;
            cursor: -moz-grabbing;
            cursor: grabbing;

            > .card {
                @include cardDrag;
            }
        }

        &.long {
            
            .text {
                p {
                    @include typeBody;
                }
                
                .card {
                    max-width: $articleWidth * .75;
                }
            }
        }
        
        &.soundcloud .card {
            width: $articleWidth;
        }
                
        // NEW ELEMENT
        
        &.add-element, &.editing {
            
            &:hover {
                author {
                    opacity: 0;
                }
            }

            .card {
                @include cardHover;
                border-style: dashed !important;
 
                &.text {
                    color: $colorType;
                    background-color: $colorCardBackground;
                }
            }            
        }
        
        &.add-element{
            
            .card {
                width: $articleWidth !important;

                .autogrow-textarea-mirror {
                    width: $articleWidth !important;
                }
            }
        }
        
        // EDITING 
        
        &.editing {
            
        }
        
        // CONTENTS
        
        textarea {
            width: 100%;
            height: $baseline;
            color: $colorType;
            background-color: transparent;
            @include typeHeader;
            font-style: italic;
        }
        
        author {
            @include typeBodySmallCaps;
            font-style: normal;
            line-height: 1em;
            position: absolute;
            display: block;
            color: $colorTypeLight;
            background-color: $colorType;
            padding: $gutter/4;
            bottom: 0;
            right: 0;
            opacity: 0;
            white-space: nowrap;
            z-index: -900;
            @include box-shadow($cardBoxShadowDimensions $cardBoxShadowColor);
            @include transform(translate3d(0,0,0));
            @include transition(.25s $defaultCurve);
            @include transition-property(opacity,
                                background-color,
                                         transform,
                                 -webkit-transform,
                                    -moz-transform);
        }
        
        // CONTENT
        
        .card {
            position: relative;
            max-width: $articleWidth;
                    transform-origin: bottom right;
            -webkit-transform-origin: bottom right;
            @include transition(.125s $defaultCurve);
            @include transition-property(transform,
                                 -webkit-transform,
                                    -moz-transform,
                                         box-shadow,
                                 -webkit-box-shadow,
                                    -moz-box-shadow,
                                         background-color,
                                         border-color,
                                         color);

            &.text {
                @include cardStyle;
                background: $colorAccentLight;
//                 color: $colorType;
                font-style: italic;
                border: $cardBorder;
                width: $articleWidth;
//                 padding-bottom: $broadMargin;
                min-height: $articleMinHeight;
                overflow: hidden;
            }

            &.image {
                width: $articleWidth;
                margin-left: $cardBorderWidth;
//                 border-left: $cardBorder;
            }
            
            &.website {
                @include cardStyle;
                width: $articleWidthNarrow;
                padding-top: $cell * 2;
                
                &:hover {
                    @include hoverLinkAnimation;
                }
                
                a {
                    border: 0;
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                }
                               
                .text {

                    
                    header {
                        position: absolute;
                        top: $cell/2;
                        @include transition($collectionOpenTransitionDuration $defaultCurve);
                        @include transition-property(top);

                        h1 {
                            display: -webkit-box;
                            -webkit-line-clamp: 4;
                            -webkit-box-orient: vertical; 
//                             max-height: $typeHeaderLeading * 3; 
//                             text-overflow: ellipsis;
                            max-height: $typeHeaderLeading * 4;
                            overflow: hidden;
                            margin-left: $headerLeftMarginOffset;
                            padding-bottom: .125em;
                            margin-bottom: -.125em;
//                             @include multiline-ellipsis($typeHeaderLeading * 3, $typeHeaderLeading, 1em);
                        }
    
                        .url {
                            margin-top: $cell/2;
                            @include typeSmall;
                            @include transition($collectionOpenTransitionDuration $defaultCurve);
                            @include transition-property(opacity);
                        }
                    }

                    .description {
                        margin-top: ($broadMargin * 3);
                        margin-bottom: $cell/2;
                        opacity: 1;
                        @include typeSmall;
                        @include transition($collectionOpenTransitionDuration $defaultCurve);
                        @include transition-property(opacity, margin-top);
                    }
                    
                    img {
                        margin-top: 0;
                        @include transition($collectionOpenTransitionDuration $defaultCurve);
                        @include transition-property(margin-top);
                    }
                }

                &.image {
                    max-height: $baseline * 24;
                }
            }

            
            &.caption, &.comment {                       
                // background-color: $colorCardBackgroundLight;
            }

            img {
                width: 100%;
                margin-bottom: -$cell/3;
                background-color: $colorCardBackground;
            }
        }
    }
}