@import "screen.scss";

body {
    @include transition(background-color .5s $defaultCurve); // for label hover effect
}

.content {
    height: auto;
    min-height: 0;
    margin: 0 $gutter;
//     padding-top: $broadMargin + 1;
    @include transition(1s $defaultCurve);
    @include transition-property(opacity, -webkit-filter);
    
    @media (min-width: $breakSmall) {
        margin: $gutter $gutter $gutter $gutter * 3;
    }
    
    &.blur {
        -webkit-filter: grayscale(1);
        mix-blend-mode: multiply;
        opacity: .125;
    }
    
    .mask {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
    }
}

.scale {
          transform-origin: left top;
  -webkit-transform-origin: left top;
}

nav.main {
    position: fixed;
    z-index: 2;
    left: 0;
    right: 0;
    
    a, a:hover, a:active {
        opacity: 1;
    }
    
    ul.panel {
        $width: 100vh;
        top: 50vh;
        margin-top: $width/2;
        text-align: center;
        width: $width;
        border-bottom: transparent $cardBorderWidth solid;
        height: 0;
/*
        @include transition(.25s $defaultCurve);
        @include transition-property(background-color, border-color);
*/
        
/*
        &:hover {
            background-color: $colorCardBackground;
            border-color: $cardBorderColor;
        }
*/
        
        &.left {
            position: absolute;
            left: 0;
            @include transform(rotateZ(270deg));
            transform-origin: left top;
            -webkit-transform-origin: left top;
            
            &:hover {
              
            }
        }
        
        &.right {
            position: absolute;
            right: 0;
            @include transform(rotateZ(90deg));
            transform-origin: right top;
            -webkit-transform-origin: right top;
        }
        
        li {
            width: 100%;
                    transform-origin: left center;
            -webkit-transform-origin: left center;
            
            &.panelHeader {
                position: absolute;
                top: 0;
                
                a {
                    -webkit-text-stroke: 1px $colorType;
                    -webkit-text-fill-color: $colorCardBackground;
                    
                    &:hover {
                        @include typeOutlineFillBlack;
                    }
                }
            }
            
            a {
                display: inline-block;
                background: blue;
//                 width: 100%;
                line-height: 1.25em;
                font-size: 36pt;
                font-weight: $fontWeightMedium;
                @include transition(.25s $defaultCurve);
                @include transition-property(-webkit-text-stroke, -webkit-text-fill-color);
            }
            
            &.menu {
                
                ul.labels {
                    li.label {
                        &.recent {
                            a {
                                -webkit-text-stroke: 1px $colorType;
                                -webkit-text-fill-color: $colorType;
                            }
                        }
                        
                        a {
                            -webkit-text-stroke: 1px $colorType;
                            -webkit-text-fill-color: $colorCardBackground;
                        }
                    }
                }
            }
        }
    }
}

/*
nav.main {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: $broadMargin;
    z-index: 2;
    
    .backButton {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 2;
    }

    .bar {
        height: 100%;
        width: 100%;
        background: $colorCardBackground;
        border-bottom: $cardBorder;
        @include transition(.5s $defaultCurve);
        @include transition-property(border-color, background-color);
      
        ul.tabs {
            position: absolute;
            top: 0;
            left: $broadMargin;
            right: $broadMargin;
            bottom: 0;
            text-align: center;
        //         background-color: red;
            
            li {
                display: inline-block;
                height: 100%;
                
                a {
                    display: block;
                    padding: 0 $gutter * 2;
                    line-height: $broadMargin;
                    height: 100%;
        //                 background-color: blue;
                }
            }
        }
    }
}
*/

.container {
    transform-origin: top left;
    
    @media (max-width: $breakSmall) {
        $scale: (1/2);
        
        @include transform(scale($scale));
        width: 100% * (1/$scale);
        
        article {
            .card {
                border-width: (1px/$scale);
            }
        }
        
        .pack {
            h1.packTitle {
                -webkit-text-stroke: (1px/$scale) $colorType;
            }
        }
    }
    
    @media (min-width: $breakSmall) {
        $scale: (1/2);
        
        @include transform(scale($scale));
        width: 100% * (1/$scale);
        
        article {
            .card {
//                 border-width: (1px/$scale);
            }
        }
        
        .pack {
            h1.packTitle {
                -webkit-text-stroke: (1px/$scale) $colorType;
            }
        }
    }
    
    @media (min-width: $breakMedium) {
        $scale: (1/1.5);
        
        @include transform(scale($scale));
        width: 100% * (1/$scale);
        
        article {
            .card {
                border-width: (1px/$scale);
            }
        }
        
        .pack {
            h1.packTitle {
                -webkit-text-stroke: (1px/$scale) $colorType;
            }
        }
    }
    
/*
    @media (min-width: $breakLarge) {
        $scale: (1);
        
        @include transform(scale($scale));
        width: 100% * (1/$scale);
        
        article {
            .card {
                border-width: (1px/$scale);
            }
        }
        
        .pack {
            h1.packTitle {
                -webkit-text-stroke: (1px/$scale) $colorType;
            }
        }
    }
*/
    
    
    article {
        @include transition(1s $defaultCurve);
        @include transition-property(background-color);
           
        &.defocus {
            .card {
                -webkit-filter: grayscale(1);
                opacity: .1;
            }
        }
        
        &.dropTarget {
            .card {
                -webkit-filter: grayscale(1);
                mix-blend-mode: multiply;
            }
            
            .backgroundColor {
//                 opacity: 1;
            }
        }
        
        .labelIndicator {
            content: "";
            height: $cell;
            width: $cell * 4;
            background: red;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 2;
            border: $cardBorder;
            color: transparent;
            padding: 0;
            @include transition(.25s $defaultCurve);
            @include transition-property(padding);
            white-space: nowrap;
            @include cursorGrab;
            
            &:hover {
                color: $colorType;
                width: intrinsic;
                height: auto;
                padding: 0 $cell $cell/2 $cell;
            }
            
            &:active {
                @include cursorGrabbing;
            }
        }
        
        .comments {
            margin-top: $typeBodyLeading;
            width: $articleSide;
                    transform-origin: left top;
            -webkit-transform-origin: left top;
            
            li {
                opacity: 0; // prepare for animation
                margin-bottom: $typeBodyLeading/2;
            }
        }
        
        .card {
/*
            mix-blend-mode: multiply;
            -webkit-filter: grayscale(0);
*/

            @include transition(1s $defaultCurve);
            @include transition-property(transform,
                                 -webkit-transform,
                                    -moz-transform,
                                         box-shadow,
                                 -webkit-box-shadow,
                                    -moz-box-shadow,
                                         background-color,
                                         border-color,
                                         color,
                                         mix-blend-mode,
                                 -webkit-filter);
        }
        
        .backgroundColor {
            @include transition(1s $defaultCurve);
            @include transition-property(opacity);
            opacity: 0;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            height: 100%;
            width: 100%;
            z-index: -1;
        }
    }
}