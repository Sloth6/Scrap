mixin articleMixin(article, collections)
  -
    var classes =  [article.contentType] //, 'zoomTarget'
    var content = article.content
    for (var i = 0; i < collections.length; i++) {
      classes.push(collections[i].collectionKey)
    }
    if (article.contentType == 'youtube' || article.contentType == 'soundcloud') {
      classes.push('playable')
    }

  article(id=article.id, style= posString,
    class = classes,
    data-contenttype= article.contentType,
    data-creatorid  = article.creatorId,
    data-content    = article.content
  )
    .collections.parallaxLayer(data-parallaxdepth='1')
      ul.articleCollections(style='position:absolute;')
        li.addCollection
          a
            .simpleHover Add label
          .dot(style='height: 0; width: 0; opacity: 0; display: none; visibility: hidden;')
        - for (var i = 0; i < collections.length; i++)
          - var collection = collections[i]
          - var key = collection.collectionKey
          li.collection(data-collectionKey=key, class=key)
            a.typeSmall(href='#', style='color:'+collection.color+'; -webkit-text-fill-color:'+collection.color+';', data-color=collection.color)
              .simpleHover!=collection.name
            .dot(style='background-color:'+collection.color+';')
      ul.addCollectionMenu

    .card.cardHover.cardDrag(class=article.contentType)
      case article.contentType

        when 'image'
          img.parallaxLayer(data-parallaxdepth='.5', src = content.original_url)

        when 'website'
          -var url = decodeURIComponent(content.url)
          header
            - if (collections[0] != undefined)
              - var color = collections[0].color
            h1.headerType.parallaxLayer(data-parallaxdepth='.5')!=content.title
            .detail
              .source.bodyType.smallCaps.parallaxLayer(data-parallaxdepth='.375')!=content.domain
              .description.parallaxLayer.parallaxHidden(data-parallaxdepth='.25')!=content.description
          .image.parallaxLayer(data-parallaxdepth='.5')
            img(src=content.image)
          a(href=url, target='_blank')
          // title='Open “' + content.title + '” in a new tab')

        when 'file'
          .fakeCard
            header
              - name = content.split('/').pop()
              //- - extension = name.pop()
              h1.headerType.title=name.split('.')[0]
              p.extension.smallCaps.bodyType=name.split('.').pop()
            ul.cardActions
              li
                a.download.confirm(href='#') Download
          .decorative.fold

        when 'video'
          video()
            source(src = content.url)

        when 'soundcloud'
          .preview.parallaxLayer(data-parallaxdepth='.5', title='Play “' + content.title + '”')
            img.soundcloudThumbnail(src = content.thumbnail_url)
          header
            .top.parallaxLayer(data-parallaxdepth='0', data-parallaxoffset={x: 0, y: -0})
              .artist.smallType.parallaxLayer(data-parallaxdepth='.125', data-parallaxoffset={x: 0, y: -24})!=content.author_name
              h1.headerType.typeOutlineWhite.title.parallaxLayer(data-parallaxdepth='.375')!=content.title
            .detail.parallaxLayer(data-parallaxdepth='.125', data-parallaxoffset={x: 0, y: 36})
              .source.smallType.smallCaps SoundCloud
          // .playButton

        when 'youtube'
          .preview.parallaxLayer(data-parallaxdepth='.5', title='Play “' + content.title + '”')
            img.youtubeThumbnail(src=content.image)
          header
            .top.parallaxLayer(data-parallaxdepth='0', data-parallaxoffset={x: 0, y: -0})
              // .artist.smallType.parallaxLayer(data-parallaxdepth='.1', data-parallaxoffset={x: 0, y: -24}) Artist
              h1.headerType.typeOutlineWhite.title.parallaxLayer(data-parallaxdepth='.375')!=content.title
            .detail.parallaxLayer(data-parallaxdepth='.125', data-parallaxoffset={x: 0, y: 36})
              .source.smallType.smallCaps youtube
          .playButton


        when 'text'
          //- contentEditable="false", designmode="on"
          .editable.parallaxLayer(data-parallaxdepth='.375')
            | !{article.content.text}
          // ul.cardActions.parallaxLayer(data-parallaxdepth='.75')
          //   li.right.showOnEditing
          //     a.done.actionButton.confirm(href='#') Done
              //- a.invisible.cancel.confirm(href='#') Cancel
        default
          p!=article.content
    footer.parallaxLayer(data-parallaxdepth='.125')
      .meta
        ul
          li.left
            if article.Creator !== undefined
              author.smallType!=article.Creator.name
          li.right
            input.articleDeleteButton.smallType(type='button', value='Delete')
