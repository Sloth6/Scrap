extends layout

block scripts
  include partials/spaceScripts

block content
  header 
    include partials/spaceMenu
  
    include partials/userMenu

  form(enctype="multipart/form-data",class="drag-upload")
    input(type="hidden",name="key")
    input(type="hidden",name="AWSAccessKeyId",value="AKIAJKJJR5OLTKWMMHSA")
    input(type="hidden",name="acl",value="public-read")
    input(type="hidden",name="policy")
    input(type="hidden",name="signature")
    input(type="hidden",name="success_action_status",value="201")
    input(type="hidden",name="Content-Type")
    input(type="file", style="visibility:hidden;",name="file")

  .delete.trash
  
  section.space
  
    section.content
      
      article(id="spaceName", class="text", style="top:0px;left:0px;z-index:1;-webkit-transform:scale3d(1.0,1.0,1.0);transform:scale(1.0,1.0,1.0);")
        .card.text.comment
          p= current_space.name
      
      each element in current_space.elements
        if element.z > maxZ
          - maxZ = element.z

        if (element.x + 30 * element.scale) > maxX
          - maxX = (element.x + 30 * element.scale)

        if element.x < minX
          - minX = element.x

        if element.y+30 > maxY
          - maxY = element.y+30

        if element.y < minY
          - minY = element.y

        if element.scale < minScale
          - minScale = element.scale
        - var classes = [ "color"+colors[element.creatorId], element.contentType, "draggable" ]
        
        if element.contentType == 'text'
          if element.content.length >= 50
            - classes.push("long")
          else
            - classes.push("short")

        - var posString = "top:"+element.y +"px;left:"+element.x+"px;z-index:"+element.z+";"
        - element.scale = 1.0
        - var scaleString = "-webkit-transform:scale3d("+element.scale+","+element.scale+",1.0); transform:scale3d("+element.scale+","+element.scale+"},1.0);"
        article(id=element.id, class= classes, style=posString+scaleString)
          case element.contentType
            when 'image'
              include partials/contentTypes/image
            when 'gif'
              include partials/contentTypes/gif
            when 'website'
              include partials/contentTypes/website
            default
              include partials/contentTypes/text

